### íŒ©í† ë¦¬ ë©”ì†Œë“œ íŒ¨í„´ì´ë€?

íŒ©í† ë¦¬ ë©”ì†Œë“œ íŒ¨í„´ì´ë€ **êµ¬ì²´ì ìœ¼ë¡œ ì–´ë–¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì§€ëŠ” ì„œë¸Œ í´ë˜ìŠ¤ê°€ ì •í•˜ëŠ” íŒ¨í„´**ì´ë‹¤. ë‹¤ì‹œ ë§í•´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“œëŠ” ì±…ì„ì„ êµ¬ì²´ì ì¸ í´ë˜ìŠ¤ê°€ ì•„ë‹ˆë¼ ì¸í„°í˜ì´ìŠ¤ ë©”ì†Œë“œë¡œ ê°ì‹¸ëŠ” í–‰ìœ„ì´ë‹¤. ì‰½ê²Œ ì •ë¦¬í•˜ë©´ **ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì–´ ë‚´ëŠ” ê³µì¥(ì¸í„°í˜ì´ìŠ¤) íŒ¨í„´**ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.

<img height="150" src="/Users/mond/Documents/workspace/learn-record/GoF ë””ìì¸ íŒ¨í„´/images/factory_method_pattern_image1.jpeg"/>

íŒ©í† ë¦¬ ë©”ì†Œë“œ íŒ¨í„´

ìœ„ ê·¸ë¦¼ì„ ì¢€ ë” ì‚´í´ë³´ë©´ êµ¬ì²´ì ì¸ í´ë˜ìŠ¤(ConcreteCreator)ì— ë¡œì§ì„ ëª¨ë‘ ë‹´ì•„ë‘ë©´ í™•ì¥ì„±ì´ ë–¨ì–´ì ¸ ì¶”ìƒí™”ë˜ì–´ ìˆëŠ” íŒ©í† ë¦¬(Creator)ë¥¼ ë§Œë“œëŠ” ê²ƒì´ë‹¤. íŒ©í† ë¦¬ì˜ ì—­í• ì€ ê³µí†µì ì¸ ë¶€ë¶„ì€ ì¸í„°í˜ì´ìŠ¤ ì•ˆì— ë„£ì–´ë‘ê³ , ì¼ë¶€ ë°”ë€Œì–´ì•¼í•˜ëŠ” ë¶€ë¶„ ì¦‰ í™•ì¥ì„±ì´ ìˆì–´ì•¼ í•˜ëŠ” ë¶€ë¶„ì€ ì„œë¸Œ í´ë˜ìŠ¤ì—ì„œ êµ¬í˜„í•  ìˆ˜ ìˆê²Œë” ë§Œë“¤ì–´ì£¼ëŠ” íŒ¨í„´ì´ë‹¤. Productë„ ë§ˆì°¬ê°€ì§€ !

â†’ Product, Creatorì˜ ìƒˆë¡œìš´ ê¸°ëŠ¥ìœ¼ë¡œ í™•ì¥í•˜ì˜€ê³ , ê¸°ì¡´ ì½”ë“œë¥¼ ë³€ê²½í•˜ì§€ ì•Šì•˜ìœ¼ë‹ˆ ë³€ê²½ì—” ë‹«í˜€ìˆë‹¤.(`OCP - Open Closed Prinpical`)

â†’ íŒ©í† ë¦¬ ë©”ì†Œë“œ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ê²°í•©ë„ë¥¼ ë‚®ì¶”ëŠ” ëª©ì  â†’ í´ë˜ìŠ¤ì˜ ë³€ê²½ì ì´ ìƒê²¼ì„ ë•Œ ì–¼ë§ˆë‚˜ ë‹¤ë¥¸í´ë˜ìŠ¤ì—ë„ ì˜í–¥ì„ ì£¼ëŠ”ê°€ ?

â†’ JAVA 8 ì´í•˜ëŠ” interface ì•ˆì— private ë©”ì†Œë“œë¥¼ ì“¸ ìˆ˜ ì—†ì–´ ì¶”ìƒë©”ì†Œë“œë¥¼ ì •ì˜í•´ë‘ê³  êµ¬í˜„

### íŒ©í† ë¦¬ ë©”ì†Œë“œ íŒ¨í„´ì˜ ì¥/ë‹¨ì 

[+] ê¸°ì¡´ ì½”ë“œë¥¼ ê±´ë“œë¦¬ì§€ ì•Šê³  í™•ì¥ì„±ì´ ìš©ì´ ( Product, Creatorì˜ ê²°í•©ë„ê°€ ë‚®ìŒ ) â†’ OCP

[-] ê°ìì˜ ì—­í• ì„ ë‚˜ëˆ„ë‹¤ë³´ë‹ˆ í´ë˜ìŠ¤ê°€ ëŠ˜ì–´ë‚¨

### íŒ©í† ë¦¬ ë©”ì†Œë“œë¥¼ ë§Œë“œëŠ” ì˜ˆì œ

ë°°ë¥¼ ë§Œë“œëŠ” ê³µì¥(Creator)ê³¼ ë°°(Product)ë¥¼ ì˜ˆë¥¼ ë“¤ì–´ë³´ì. ë°°ë¥¼ ë§Œë“œëŠ”ë° ê³µí†µìœ¼ë¡œ í•˜ëŠ” ì¼ë“¤ì€ ì¸í„°í˜ì´ìŠ¤ì— êµ¬í˜„í•˜ê³  ì„œë¸Œí´ë˜ìŠ¤(WhiteShipFactory, BlackShipFactory)ë“¤ì€ í•´ë‹¹ ê³µì¥ì—ì„œë§Œ í•˜ëŠ” íŠ¹ë³„í•œ ê¸°ëŠ¥ë“¤ì„ ì¶”ê°€í•˜ëŠ” ë¶€ë¶„ì´ë‹¤. ë°°(Product) ê°™ì€ ê²½ìš°ë„ í™•ì¥ì„±ì„ ê³ ë ¤í•´ ìƒì†ì„ ë°›ì•˜ë‹¤.

<img height="150" src="/Users/mond/Documents/workspace/learn-record/GoF ë””ìì¸ íŒ¨í„´/images/factory_method_pattern_image2.png" width="300"/>

íŒ©í† ë¦¬ ë©”ì†Œë“œ íŒ¨í„´ì˜ ë‹¤ì´ì–´ê·¸ë¨

<aside>
ğŸ‘‰ ShipFactory

</aside>

ì´ ì¸í„°í˜ì´ìŠ¤ëŠ” ê³µí†µìœ¼ë¡œ í•˜ëŠ” ì¼(ê²€ì¦í•˜ê¸°, ì¤€ë¹„í•˜ê¸°, ë°°ë§Œë“¤ê¸°, ë°° ì œì‘ í›„ ì´ë©”ì¼ë³´ë‚´ê¸°)ë¥¼ êµ¬í˜„í•œ ì¸í„°í˜ì´ìŠ¤ì´ë‹¤. ì¸í„°í˜ì´ìŠ¤ ë‚´ private ë©”ì†Œë“œ(JAVA 9 ì´ìƒ)ë¥¼ ì‚¬ìš©í•˜ì˜€ê³  ë°°ë¥¼ ë§Œë“¤ì–´ì•¼ í•˜ëŠ” ë¶€ë¶„ì¸ createShipì— ëŒ€í•´ì„  ì„œë¸Œí´ë˜ìŠ¤í•œí…Œ ì—­í• ì„ ìœ„ì„í•œë‹¤.

```java
public interface ShipFactory {

    default Ship orderShip(String name, String email) {
        validate(name,  email);
        prepareFor(name);
        Ship ship = createShip();
        sendEmailTo(email);

        return ship;
    }

    Ship createShip();

    private void validate(String name, String email) {
        if (name == null) {
            throw new IllegalArgumentException("ì´ë¦„ì„ ì ì–´ì£¼ì„¸ìš”.");
        }
        if (email == null) {
            throw new IllegalArgumentException("ì´ë©”ì¼ì„ ì ì–´ì£¼ì„¸ìš”.");
        }
    }

    private void prepareFor(String name) {
        System.out.println(name + "ë§Œë“¤ ì¤€ë¹„ ì¤‘");
    }

    private void sendEmailTo(String email) {
        System.out.println(email + "ë°œì†¡ ì™„ë£Œ");
    }

}
```

- ìë°” 8 ì´í•˜ì—ì„œëŠ” DefaultShipFactoryë¡œ ì¤‘ê°„ ê³„ì¸µì¸ ì¶”ìƒí´ë˜ìŠ¤ë¥¼ í•˜ë‚˜ ë” ë§Œë“ ë‹¤.

    ```java
    public abstract class DefaultShipFactory implements ShipFactory {
    
        @Override
        public void validate(String name, String email) {
            if (name == null) {
                throw new IllegalArgumentException("ì´ë¦„ì„ ì ì–´ì£¼ì„¸ìš”.");
            }
            if (email == null) {
                throw new IllegalArgumentException("ì´ë©”ì¼ì„ ì ì–´ì£¼ì„¸ìš”.");
            }
        }
    
        @Override
        public void prepareFor(String name) {
            System.out.println(name + "ë§Œë“¤ ì¤€ë¹„ ì¤‘");
        }
    
        @Override
        public void sendEmailTo(String email) {
            System.out.println(email + "ë°œì†¡ ì™„ë£Œ");
        }
        
    }
    ```


<aside>
ğŸ‘‰ WhiteShipFactory

</aside>

ShipFactory ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ WhiteShipë§Œì˜ ê¸°ëŠ¥ì„ createShipì— êµ¬í˜„í•œë‹¤.

```java
public class WhiteShipFactory implements ShipFactory {
    
    @Override
    public Ship createShip() {
        return new WhiteShip();
    }

}
```

<aside>
ğŸ‘‰ BlackShipFactory

</aside>

ShipFactory ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ BlackShipë§Œì˜ ê¸°ëŠ¥ì„ createShipì— êµ¬í˜„í•œë‹¤.

```java
public class BlackShipFactory implements ShipFactory {

    @Override
    public Ship createShip() {
        return new BlackShip();
    }

}
```

<aside>
ğŸ‘‰ Ship

</aside>

ë°°ì— ê³µí†µì ì¸ íŠ¹ì§•ë“¤ì„ ë„£ê³  í™•ì¥ ê°€ëŠ¥í•˜ë„ë¡ ì‘ì„±í•˜ì˜€ë‹¤.

```java
public class Ship {

    String name;
    String color;
    String logo;

    public Ship() {}

    public Ship(String name, String color, String logo) {
        this.name = name;
        this.color = color;
        this.logo = logo;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getColor() {
        return color;
    }

    public void setColor(String color) {
        this.color = color;
    }

    public String getLogo() {
        return logo;
    }

    public void setLogo(String logo) {
        this.logo = logo;
    }

    @Override
    public String toString() {
        return "Ship{" +
                "name='" + name + '\'' +
                ", color='" + color + '\'' +
                ", logo='" + logo + '\'' +
                '}';
    }

}
```

<aside>
ğŸ‘‰ WhiteShip

</aside>

í™•ì¥ì„±ì— ê³ ë ¤í•˜ì—¬ Shipì„ ìƒì†í•œë‹¤

```java
public class WhiteShip extends Ship {

    public WhiteShip() {
        setName("whiteship");
        setColor("white");
        setLogo("whitelogo");
    }
}
```

<aside>
ğŸ‘‰ BlackShip

</aside>

í™•ì¥ì„±ì— ê³ ë ¤í•´ Shipì„ ìƒì†í•œë‹¤.

```java
public class BlackShip extends Ship {

    public BlackShip() {
        setName("blackship");
        setColor("black");
        setLogo("blacklogo");
    }
}
```

<aside>
ğŸ‘‰ Client : í…ŒìŠ¤íŠ¸ ì½”ë“œ

</aside>

```java
public class Client {

    public static void main(String[] args) {

        Client client = new Client();
        client.print(new WhiteShipFactory(), "Lee", "lee@gmail.com");
        client.print(new BlackShipFactory(), "Kim", "kim@gmail.com");

    }

    private void print(ShipFactory shipFactory, String name, String email) {
        System.out.println(shipFactory.orderShip(name, email));
    }

}
```

### íŒ©í† ë¦¬ ë©”ì†Œë“œì´ ì‚¬ìš©ì¤‘ì¸ ì˜ˆì œ

- ë‹¨ìˆœí•œ íŒ©í† ë¦¬ íŒ¨í„´
  - ë§¤ê°œë³€ìˆ˜ì˜ ê°’ ë˜ëŠ” ë©”ì†Œë“œì— ë”°ë¼ ê°ê¸° ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë¦¬í„´í•˜ëŠ” ë‹¨ìˆœí•œ ë²„ì „ì˜ íŒ©í† ë¦¬ íŒ¨í„´
  - ìë°”ì˜ Calendarì˜ getInstanceê°€ SimpleFactoryPattern
    - ì½”ë“œ ì‚´í´ë³´ê¸°

        ```java
        public static Calendar getInstance(Locale aLocale)
            {
                return createCalendar(defaultTimeZone(aLocale), aLocale);
            }
        
        private static Calendar createCalendar(TimeZone zone,
                                                   Locale aLocale)
            {
                CalendarProvider provider =
                    LocaleProviderAdapter.getAdapter(CalendarProvider.class, aLocale)
                                         .getCalendarProvider();
                if (provider != null) {
                    try {
                        return provider.getInstance(zone, aLocale);
                    } catch (IllegalArgumentException iae) {
                        // fall back to the default instantiation
                    }
                }
        
                Calendar cal = null;
        
                if (aLocale.hasExtensions()) {
                    String caltype = aLocale.getUnicodeLocaleType("ca");
                    if (caltype != null) {
                        switch (caltype) {
                        case "buddhist":
                        cal = new BuddhistCalendar(zone, aLocale);
                            break;
                        case "japanese":
                            cal = new JapaneseImperialCalendar(zone, aLocale);
                            break;
                        case "gregory":
                            cal = new GregorianCalendar(zone, aLocale);
                            break;
                        }
                    }
                }
                if (cal == null) {
                    // If no known calendar type is explicitly specified,
                    // perform the traditional way to create a Calendar:
                    // create a BuddhistCalendar for th_TH locale,
                    // a JapaneseImperialCalendar for ja_JP_JP locale, or
                    // a GregorianCalendar for any other locales.
                    // NOTE: The language, country and variant strings are interned.
                    if (aLocale.getLanguage() == "th" && aLocale.getCountry() == "TH") {
                        cal = new BuddhistCalendar(zone, aLocale);
                    } else if (aLocale.getVariant() == "JP" && aLocale.getLanguage() == "ja"
                               && aLocale.getCountry() == "JP") {
                        cal = new JapaneseImperialCalendar(zone, aLocale);
                    } else {
                        cal = new GregorianCalendar(zone, aLocale);
                    }
                }
                return cal;
            }
        ```

  - NumberFormat
- ìŠ¤í”„ë§ì˜ BeanFactory
  - xml ì„¤ì •ê³¼ java ì„¤ì •ìœ¼ë¡œ ì½ì–´ì˜¤ëŠ” ë°©ì‹ì´ë‹¤.
  - Productì— í•´ë‹¹í•˜ëŠ” ê²ƒì€ Object
  - ConcreteProductì— í•´ë‹¹í•˜ëŠ” ê²ƒì€ "config.xml", Config.class
  - BeanFactoryê°€ Creatorì´ê³ , ClassPathXmlApplicationContext, AnnotationConfigApplicationContext ConcreateCreator
  - ì½”ë“œ ì‚´í´ë³´ê¸°

      ```java
      BeanFactory xmlFactory = new ClassPathXmlApplicationContext("config.xml");
      xmlFactory.getBean("hello", String.class);
      BeanFactory javaFactory = new AnnotationConfigApplicationContext(Config.class);
      javaFactory.getBean("hello", String.class);
      ```

      ```java
      Object getBean(String name) throws BeansException;
      ```